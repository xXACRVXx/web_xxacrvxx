
{% extends 'layout.html' %}

{% block title %}Dashboard - {{ user }}{% endblock %}

{% block content %}

<!-- Dashboard Header -->
<div class="page-banner home-banner" style="height: 100px;">
  <div class="container h-100">
    <div class="row align-items-center h-100">
      <div class="col-lg-12 py-2 wow fadeInUp text-center">
        <h3 class="mb-2">¬°Bienvenido, {{ user }}! üëã</h3>
        <div class="d-flex justify-content-center flex-wrap">
          <span class="badge badge-success mx-1 mb-1">‚úÖ Activa</span>
          <span class="badge badge-info mx-1 mb-1">üìÅ Archivos</span>
          <span class="badge badge-primary mx-1 mb-1">üìù Blog</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Acciones R√°pidas -->
<div class="page-section">
  <div class="container">
    <div class="text-center wow fadeInUp">
      <h2 class="title-section">Acciones <span class="marked">R√°pidas</span></h2>
      <div class="divider mx-auto"></div>
    </div>
    <div class="row my-5">
      <div class="col-md-6 col-lg-3 py-3 wow fadeInUp">
        <div class="card text-center h-100">
          <div class="card-body">
            <div class="mb-3">
              <span class="mai-cloud-upload text-primary" style="font-size: 48px;"></span>
            </div>
            <h5>Subir Archivos</h5>
            <p class="text-muted">Sube documentos, im√°genes y archivos hasta 4GB</p>
            <a href="{{url_for('upload')}}" class="btn btn-primary btn-sm btn-block">Subir</a>
          </div>
        </div>
      </div>
      <div class="col-md-6 col-lg-3 py-3 wow fadeInUp">
        <div class="card text-center h-100">
          <div class="card-body">
            <div class="mb-3">
              <span class="mai-folder text-success" style="font-size: 48px;"></span>
            </div>
            <h5>Mis Archivos</h5>
            <p class="text-muted">Explora y gestiona todos tus archivos</p>
            <a href="{{url_for('download')}}" class="btn btn-success btn-sm btn-block">Explorar</a>
          </div>
        </div>
      </div>
      <div class="col-md-6 col-lg-3 py-3 wow fadeInUp">
        <div class="card text-center h-100">
          <div class="card-body">
            <div class="mb-3">
              <span class="mai-create text-info" style="font-size: 48px;"></span>
            </div>
            <h5>Crear Post</h5>
            <p class="text-muted">Escribe y publica contenido en el blog</p>
            <a href="{{url_for('blogpost')}}" class="btn btn-info btn-sm btn-block">Escribir</a>
          </div>
        </div>
      </div>
      <div class="col-md-6 col-lg-3 py-3 wow fadeInUp">
        <div class="card text-center h-100">
          <div class="card-body">
            <div class="mb-3">
              <span class="mai-settings text-warning" style="font-size: 48px;"></span>
            </div>
            <h5>Configuraci√≥n</h5>
            <p class="text-muted">Ajusta tu perfil y preferencias</p>
            <a href="{{url_for('settings')}}" class="btn btn-warning btn-sm btn-block">Configurar</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Posts Recientes -->
{% if recent %}
<div class="page-section">
  <div class="container">
    <div class="text-center wow fadeInUp">
      <div class="subhead">Blog</div>
      <h2 class="title-section">Posts <span class="marked">Recientes</span></h2>
      <div class="divider mx-auto"></div>
    </div>
    <div class="row my-5 card-blog-row">
      {% for post in recent %}
      <div class="col-md-6 col-lg-3 py-3 wow fadeInUp">
        <a href="{{ url_for('blogview', name=post['title']) }}" class="text-decoration-none">
          <div class="card h-100 shadow-sm border-0" style="transition: all 0.3s; cursor: pointer;" onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='0 8px 25px rgba(0,0,0,0.15)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 10px rgba(0,0,0,0.1)'">
            <div class="position-relative" style="height: 180px; overflow: hidden; border-radius: 0.375rem 0.375rem 0 0;">
              <img src="{{ post['image'] if post['image'] else url_for('static', filename='blog/default.png') }}" 
                   class="w-100 h-100" 
                   style="object-fit: cover; transition: transform 0.4s;" 
                   alt="{{post['title']}}" 
                   onerror="this.onerror=null; this.src='{{url_for('static', filename='blog/default.png')}}'" 
                   onmouseover="this.style.transform='scale(1.1)'" 
                   onmouseout="this.style.transform='scale(1)'">
              <div class="position-absolute" style="top: 12px; right: 12px;">
                <span class="badge badge-primary shadow-sm">üëÅÔ∏è {{ post['count_view'] or 0 }}</span>
              </div>
              <div class="position-absolute w-100" style="bottom: 0; background: linear-gradient(transparent, rgba(0,0,0,0.7)); height: 60px;"></div>
            </div>
            <div class="card-body d-flex flex-column p-3">
              <h6 class="card-title mb-2 font-weight-bold" style="height: 48px; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; line-height: 1.3; color: var(--bs-body-color);">
                {{ post['title'] }}
              </h6>
              <p class="card-text text-muted mb-3 flex-grow-1" style="height: 60px; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; line-height: 1.4; font-size: 0.9rem;">{{ post['descript'] }}</p>
              <div class="mt-auto">
                <div class="d-flex justify-content-between align-items-center mb-2 pb-2 border-bottom">
                  <div class="d-flex align-items-center">
                    <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center" style="width: 28px; height: 28px; font-size: 12px;">
                      <span class="text-white font-weight-bold">{{ post['creat_id'][0].upper() }}</span>
                    </div>
                    <small class="ml-2 font-weight-medium" style="color: var(--bs-body-color); font-size: 0.8rem;">{{ post['creat_id'] }}</small>
                  </div>
                  <small class="text-muted" style="font-size: 0.75rem;">
                    üìÖ {{ post['time'][:10] }}
                  </small>
                </div>
                <div class="text-center">
                  <span class="btn btn-primary btn-sm btn-block font-weight-bold" style="border-radius: 20px; pointer-events: none; font-size: 0.8rem;">
                    üìñ Leer Art√≠culo
                  </span>
                </div>
              </div>
            </div>
          </div>
        </a>
      </div>
      {% endfor %}
    </div>
    <div class="text-center">
      <a href="{{url_for('blog')}}" class="btn btn-outline-primary rounded-pill">Ver Todos los Posts</a>
    </div>
  </div>
</div>
{% endif %}
  
<!-- Funcionalidades Disponibles -->
<div class="page-section">
  <div class="container">
    <div class="row">
      <div class="col-lg-6 py-3 wow fadeInLeft">
        <h2 class="title-section">üìÅ Tu Espacio Personal</h2>
        <div class="divider"></div>
        <p class="mb-4">
          Tienes acceso completo a tu nube personal. Sube archivos, organ√≠zalos en carpetas 
          y comp√°rtelos de forma segura con enlaces protegidos.
        </p>
        <div class="mb-4">
          <h6>Caracter√≠sticas disponibles:</h6>
          <ul class="small">
            <li>‚úÖ Subida de archivos hasta 4GB</li>
            <li>‚úÖ Organizaci√≥n en carpetas</li>
            <li>‚úÖ Enlaces de compartici√≥n seguros</li>
            <li>‚úÖ Miniaturas autom√°ticas para im√°genes</li>
            <li>‚úÖ Descarga desde URLs externas</li>
          </ul>
        </div>
        <div class="d-flex flex-wrap">
          <a href="{{url_for('cloud')}}" class="btn btn-primary mb-2 mr-2">Explorar Archivos</a>
          <a href="{{url_for('upload')}}" class="btn btn-outline mb-2">Subir Archivos</a>
        </div>
      </div>
      <div class="col-lg-6 py-3 wow fadeInRight">
        <h2 class="title-section">üìù Crea Contenido</h2>
        <div class="divider"></div>
        <p class="mb-4">
          Comparte tus ideas y conocimientos a trav√©s del blog. Escribe posts con Markdown, 
          organ√≠zalos por categor√≠as y recibe comentarios de la comunidad.
        </p>
        <div class="mb-4">
          <h6>Herramientas de blog:</h6>
          <ul class="small">
            <li>‚úÖ Editor Markdown con vista previa</li>
            <li>‚úÖ Categor√≠as y etiquetas</li>
            <li>‚úÖ Sistema de comentarios</li>
            <li>‚úÖ Contador de visualizaciones</li>
            <li>‚úÖ B√∫squeda de contenido</li>
          </ul>
        </div>
        <div class="d-flex flex-wrap">
          <a href="{{url_for('blogpost')}}" class="btn btn-primary mb-2 mr-2">Crear Post</a>
          <a href="{{url_for('blog')}}" class="btn btn-outline mb-2">Ver Blog</a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Enlaces √ötiles -->
<div class="page-section">
  <div class="container">
    <div class="text-center wow fadeInUp">
      <h2 class="title-section">Enlaces <span class="marked">√ötiles</span></h2>
      <div class="divider mx-auto"></div>
    </div>
    <div class="row my-5">
      <div class="col-md-6 col-lg-4 py-3 text-center wow fadeInUp">
        <div class="mb-3">
          <span class="mai-help-circle text-info" style="font-size: 48px;"></span>
        </div>
        <h6>Estado del Sistema</h6>
        <p class="text-muted">Verifica el estado y rendimiento del servidor</p>
        <a href="{{url_for('status_server')}}" class="btn btn-outline-info btn-sm">Ver Estado</a>
      </div>
      <div class="col-md-6 col-lg-4 py-3 text-center wow fadeInUp">
        <div class="mb-3">
          <span class="mai-person text-primary" style="font-size: 48px;"></span>
        </div>
        <h6>Portfolio del Desarrollador</h6>
        <p class="text-muted">Conoce m√°s sobre el creador de esta plataforma</p>
        <a href="{{url_for('portfolio')}}" class="btn btn-outline-primary btn-sm">Ver Portfolio</a>
      </div>
      <div class="col-md-6 col-lg-4 py-3 text-center wow fadeInUp">
        <div class="mb-3">
          <span class="mai-logo-github text-dark" style="font-size: 48px;"></span>
        </div>
        <h6>C√≥digo Fuente</h6>
        <p class="text-muted">Explora el c√≥digo open-source en GitHub</p>
        <a href="https://github.com/xXACRVXx/web_xxacrvxx" class="btn btn-outline-light btn-lg mr-3 mb-2" target="_blank">GitHub</a>
      </div>
    </div>
  </div>
</div>
  {% endblock %}